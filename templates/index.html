<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>芸莘书院生活指南</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, #1e5799 0%, #207cca 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        .section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #1e5799;
            border-bottom: 2px solid #eaeaea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        .section h3 {
            color: #207cca;
            margin: 20px 0 10px;
            font-size: 1.4rem;
        }
        .quick-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        .nav-card {
            background: #f0f7ff;
            border: 1px solid #cce0ff;
            border-radius: 8px;
            padding: 15px;
            flex: 1;
            min-width: 150px;
            text-align: center;
            transition: all 0.3s;
        }
        .nav-card:hover {
            background: #e1eeff;
            transform: translateY(-3px);
        }
        .nav-card a {
            color: #1e5799;
            text-decoration: none;
            font-weight: bold;
            display: block;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .info-card {
            background: #f9f9f9;
            border-left: 4px solid #1e5799;
            padding: 15px;
            border-radius: 5px;
        }
        .info-card h4 {
            color: #1e5799;
            margin-bottom: 10px;
        }
        .contribution-box {
            background: #fff8e1;
            border: 1px solid #ffd54f;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .add-form {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .add-form input, .add-form select, .add-form textarea {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .add-form button {
            background: #1e5799;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        .add-form button:hover {
            background: #16437e;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            border-top: 1px solid #eaeaea;
        }
        @media (max-width: 768px) {
            .quick-nav {
                flex-direction: column;
            }
            .info-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>{{ homepage.introduction }}</h1>
            <p>学生自建的信息共享平台</p>
        </header>

        <!-- 主页板块 -->
        <section id="home" class="section">
			<img src="/static/images/logo.png" style="height: 60px; margin-right: 15px; vertical-align: middle;">
            <h2>网站介绍</h2>
            <p>这是一个由芸莘书院学生自发创建的信息共享平台，旨在帮助同学们更好地适应校园生活，弥补信息差。</p>
            
            <h3>快速导航</h3>
            <div class="quick-nav">
                {% for nav in homepage.quick_nav %}
                <div class="nav-card">
                    <a href="{{ nav.link }}">{{ nav.name }}</a>
                </div>
                {% endfor %}
            </div>
            
            <h3>贡献指南</h3>
            <div class="contribution-box">
                <p>{{ homepage.contribution_guide }}</p>
                <p>如果您发现信息有误或需要更新，请使用下方表单提交更新。</p>
            </div>
        </section>

        <!-- 学习资源板块 -->
        <section id="study" class="section">
            <h2>学习资源</h2>
            
            <h3>学习网站链接</h3>
            <div class="info-grid">
                {% for site in study.learning_websites %}
                <div class="info-card">
                    <h4>{{ site.name }}</h4>
                    <p><a href="{{ site.url }}" target="_blank">{{ site.url }}</a></p>
                    <p>{{ site.description }}</p>
                </div>
                {% endfor %}
            </div>
            
            <h3>选修课推荐清单</h3>
            <table>
                <tr>
                    <th>课程名称</th>
                    <th>任课教师</th>
                    <th>难度</th>
                    <th>推荐指数</th>
                </tr>
                {% for course in study.elective_courses %}
                <tr>
                    <td>{{ course.name }}</td>
                    <td>{{ course.teacher }}</td>
                    <td>{{ course.difficulty }}</td>
                    <td>{{ "★" * course.recommend }}</td>
                </tr>
                {% endfor %}
            </table>
            
            <h3>图书馆使用指南</h3>
            <p>{{ study.library_guide }}</p>
            
            <h3>论文工具推荐</h3>
            <ul>
                {% for tool in study.paper_tools %}
                <li>{{ tool }}</li>
                {% endfor %}
            </ul>
            
            <h3>各科老师的期末考核方案</h3>
            <table>
                <tr>
                    <th>课程名称</th>
                    <th>考核方式</th>
                    <th>成绩比例</th>
                </tr>
                {% for exam in study.exam_methods %}
                <tr>
                    <td>{{ exam.course }}</td>
                    <td>{{ exam.method }}</td>
                    <td>{{ exam.ratio }}</td>
                </tr>
                {% endfor %}
            </table>
        </section>

        <!-- 校园生活板块 -->
        <section id="life" class="section">
            <h2>校园生活</h2>
            
            <h3>饭堂推荐</h3>
            <div class="info-grid">
                {% for canteen in life.canteen_recommendations %}
                <div class="info-card">
                    <h4>{{ canteen.name }}</h4>
	    {% if canteen.image %}
    	    <img src="/static/images/{{ canteen.image }}" style="width: 100%; max-width: 250px;">
        	    {% endif %}
                    <p>位置: {{ canteen.location }}</p>
                    <p>推荐指数: {{ "★" * canteen.recommend }}</p>
                    <p>特色: {{ canteen.specialty }}</p>
                </div>
                {% endfor %}
            </div>
            
            <h3>校园周边美食推荐</h3>
            <div class="info-grid">
                {% for food in life.surrounding_food %}
                <div class="info-card">
                    <h4>{{ food.name }}</h4>
                    <p>位置: {{ food.location }}</p>
                    <p>推荐指数: {{ "★" * food.recommend }}</p>
                </div>
                {% endfor %}
            </div>
            
            <h3>超市购物指南</h3>
            <p>{{ life.supermarket_guide }}</p>
            
            <h3>宿舍设施使用指南</h3>
            <p>{{ life.dorm_facilities }}</p>
        </section>

        <!-- 校园活动板块 -->
        <section id="activities" class="section">
            <h2>校园活动</h2>
            
            <h3>本月活动预告</h3>
            <table>
                <tr>
                    <th>活动名称</th>
                    <th>日期</th>
                    <th>地点</th>
                </tr>
                {% for activity in activities.month_activities %}
                <tr>
                    <td>{{ activity.name }}</td>
                    <td>{{ activity.date }}</td>
                    <td>{{ activity.location }}</td>
                </tr>
                {% endfor %}
            </table>
            
            <h3>社会实践活动</h3>
            <div class="info-grid">
                {% for practice in activities.social_practices %}
                <div class="info-card">
                    <h4>{{ practice.name }}</h4>
                    <p>时间: {{ practice.time }}</p>
                    <p>联系人: {{ practice.contact }}</p>
                </div>
                {% endfor %}
            </div>
            
            <h3>义工活动</h3>
            <div class="info-grid">
                {% for volunteer in activities.volunteer_activities %}
                <div class="info-card">
                    <h4>{{ volunteer.name }}</h4>
                    <p>时间: {{ volunteer.time }}</p>
                    <p>联系人: {{ volunteer.contact }}</p>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- 实用信息板块 -->
        <section id="practical" class="section">
            <h2>实用信息</h2>
            
            <h3>校园高清全景地图</h3>
            <p>{{ practical.campus_map }}</p>
            
            <h3>高清奖学金申请指南</h3>
            <p>{{ practical.scholarship_guide }}</p>
            
            <h3>证明文件办理流程</h3>
            <table>
                <tr>
                    <th>证明类型</th>
                    <th>办理地点</th>
                    <th>办理时间</th>
                </tr>
                {% for doc in practical.document_procedures %}
                <tr>
                    <td>{{ doc.name }}</td>
                    <td>{{ doc.place }}</td>
                    <td>{{ doc.time }}</td>
                </tr>
                {% endfor %}
            </table>
            
            <h3>助学金和贫困补助申请</h3>
            <p>{{ practical.financial_aid }}</p>
            
            <h3>校车时刻表</h3>
            <p>{{ practical.bus_schedule }}</p>
            
            <h3>简历模板库</h3>
            <ul>
                {% for template in practical.resume_templates %}
                <li>{{ template }}</li>
                {% endfor %}
            </ul>
            
            <h3>证书考试指南</h3>
            <table>
                <tr>
                    <th>证书名称</th>
                    <th>考试时间</th>
                    <th>报名方式</th>
                </tr>
                {% for exam in practical.certificate_exams %}
                <tr>
                    <td>{{ exam.name }}</td>
                    <td>{{ exam.time }}</td>
                    <td>{{ exam.registration }}</td>
                </tr>
                {% endfor %}
            </table>
            
            <h3>竞赛参与指南</h3>
            <div class="info-grid">
                {% for comp in practical.competition_guide %}
                <div class="info-card">
                    <h4>{{ comp.name }}</h4>
                    <p>时间: {{ comp.time }}</p>
                    <p>主办方: {{ comp.organizer }}</p>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- 互助社区板块 -->
        <section id="community" class="section">
            <h2>互助社区</h2>
            
            <h3>新生答疑专区</h3>
            <div class="info-grid">
                {% for qa in community.newbie_qa %}
                <div class="info-card">
                    <h4>问: {{ qa.question }}</h4>
                    <p>答: {{ qa.answer }}</p>
                </div>
                {% endfor %}
            </div>
            
            <h3>生活经验分享</h3>
            <div class="info-grid">
                {% for exp in community.life_experience %}
                <div class="info-card">
                    <h4>{{ exp.title }}</h4>
                    <p>{{ exp.content }}</p>
                </div>
                {% endfor %}
            </div>
            
            <h3>二手课本交易</h3>
            <table>
                <tr>
                    <th>书籍名称</th>
                    <th>新旧程度</th>
                    <th>联系方式</th>
                </tr>
                {% for book in community.textbook_exchange %}
                <tr>
                    <td>{{ book.book }}</td>
                    <td>{{ book.condition }}</td>
                    <td>{{ book.contact }}</td>
                </tr>
                {% endfor %}
            </table>
            
            <h3>软件工具推荐</h3>
            <div class="info-grid">
                {% for software in community.software_tools %}
                <div class="info-card">
                    <h4>{{ software.name }}</h4>
                    <p>用途: {{ software.purpose }}</p>
                    <p>获取方式: {{ software.access }}</p>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- 信息添加表单 -->
        <section class="section">
            <h2>补充信息</h2>
            <p>如果您有新的信息需要补充，请使用下方表单提交：</p>
            
            <div class="add-form">
                <form id="addInfoForm">
                    <label for="category">信息类别:</label>
                    <select id="category" name="category" required>
                        <option value="">请选择类别</option>
                        <option value="study">学习资源</option>
                        <option value="campus_life">校园生活</option>
                        <option value="activities">校园活动</option>
                        <option value="practical_info">实用信息</option>
                        <option value="community">互助社区</option>
                    </select>
                    
                    <label for="field">信息字段:</label>
                    <input type="text" id="field" name="field" placeholder="例如：学习资源" required>
                    
                    <label for="data">信息内容 (JSON格式):</label>
                    <textarea id="data" name="data" rows="5" placeholder='例如：{"name":"网站名称","url":"https://example.com","description":"网站描述"}' required></textarea>
                    
                    <button type="submit">提交信息</button>
                </form>
                <div id="formMessage" style="margin-top: 15px;"></div>
            </div>
        </section>

        <footer>
            <p>深职大校园生活指南 &copy; 2025 - 学生自建平台</p>
        </footer>
    </div>

    <script>
        // 表单提交处理
        document.getElementById('addInfoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const messageDiv = document.getElementById('formMessage');
            
            fetch('/add_info', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    messageDiv.innerHTML = `<p style="color: green;">${data.message}</p>`;
                    document.getElementById('addInfoForm').reset();
                } else {
                    messageDiv.innerHTML = `<p style="color: red;">${data.message}</p>`;
                }
            })
            .catch(error => {
                messageDiv.innerHTML = `<p style="color: red;">提交失败: ${error}</p>`;
            });
        });
    </script>
</body>
</html>
